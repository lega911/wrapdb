((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).wrapdb={})})(this,function(e){function a(s,c,i){return new Promise(async(t,r)=>{let n,o,a=0,e=e=>{a<0||(e?3==++a&&(a=-1,t(i?n.result:null)):(a=-1,r(),o.abort()))};(o=s.transaction(s.__store,"readwrite")).oncomplete=()=>e(1),o.onerror=()=>e(0),(n=c(o.objectStore(s.__store))).onsuccess=()=>e(1),n.onerror=()=>e(0),o.commit(),e(1)})}o=n="default";let s=new Promise((t,e)=>{let r=indexedDB.open(n,1);r.onerror=()=>e(),r.onupgradeneeded=e=>e.target.result.createObjectStore(o),r.onsuccess=()=>{var e=r.result;e.__store=o,t(e)}});var n,o;e.clear=async function(){return a(await s,e=>e.clear())},e.delete=async function(e){return t=await s,r=e,a(t,e=>e.delete(r));var t,r},e.get=async function(e){return t=await s,r=e,a(t,e=>e.get(r),1);var t,r},e.set=async function(e,t){return r=await s,n=e,o=t,a(r,e=>e.put(o,n));var r,n,o}});