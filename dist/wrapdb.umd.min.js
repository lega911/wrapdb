((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).wrapdb={})})(this,function(e){function a(i,u,s){return new Promise(async(t,n)=>{let o,e,r=0,a=e=>{r<0||(e?3==++r&&(r=-1,t(s?o.result:null)):(r=-1,n()))};(e=i.transaction(i.__store,"readwrite")).oncomplete=function(){a(!0)},e.onerror=function(){a(!1),n(),e.abort()};var c=e.objectStore(i.__store);(o=u(c)).onsuccess=function(){a(!0)},o.onerror=function(){a(!1),e.abort(),n()},e.commit(),a(!0)})}r=o="default";let c=new Promise((t,e)=>{let n=indexedDB.open(o,1);n.onerror=function(){e()},n.onupgradeneeded=function(e){e.target.result.createObjectStore(r)},n.onsuccess=function(){var e=n.result;e.__store=r,t(e)}});var o,r;e.clear=async function(){return a(await c,e=>e.clear())},e.delete=async function(e){return t=await c,n=e,a(t,e=>e.delete(n));var t,n},e.get=async function(e){return t=await c,n=e,a(t,e=>e.get(n),1);var t,n},e.set=async function(e,t){return n=await c,o=e,r=t,a(n,e=>e.put(r,o));var n,o,r}});